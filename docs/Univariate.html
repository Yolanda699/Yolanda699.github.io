<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title> ðŸ’Š Drug Consumption and Prevention  - Demographic Characteristics [Univariate Analysis] </title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title"><span style="font-size: 24px;"> ðŸ’Š Drug Consumption and Prevention </span></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">About</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-about">    
        <li>
    <a class="dropdown-item" href="./index.html" rel="" target="">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ResearchQuestion.html" rel="" target="">
 <span class="dropdown-text">Research Question</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-analysis" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Data Analysis</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-analysis">    
        <li>
    <a class="dropdown-item" href="./Univariate.html" rel="" target="">
 <span class="dropdown-text">Demographic Characteristics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Personality.html" rel="" target="">
 <span class="dropdown-text">Psychological Traits</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./Conclusion.html" rel="" target="">
 <span class="menu-text">Conclusion</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#legal-drugs" id="toc-legal-drugs" class="nav-link active" data-scroll-target="#legal-drugs"><strong>Legal</strong> Drugs</a>
  <ul class="collapse">
  <li><a href="#alcohol" id="toc-alcohol" class="nav-link" data-scroll-target="#alcohol">Alcohol</a></li>
  <li><a href="#caffeine" id="toc-caffeine" class="nav-link" data-scroll-target="#caffeine">Caffeine</a></li>
  <li><a href="#nicotine" id="toc-nicotine" class="nav-link" data-scroll-target="#nicotine">Nicotine</a></li>
  </ul></li>
  <li><a href="#controversial-drugs" id="toc-controversial-drugs" class="nav-link" data-scroll-target="#controversial-drugs"><strong>Controversial</strong> Drugs</a>
  <ul class="collapse">
  <li><a href="#cannabis" id="toc-cannabis" class="nav-link" data-scroll-target="#cannabis">Cannabis</a></li>
  </ul></li>
  <li><a href="#illegal-drugs" id="toc-illegal-drugs" class="nav-link" data-scroll-target="#illegal-drugs"><strong>Illegal</strong> Drugs</a>
  <ul class="collapse">
  <li><a href="#cocaine" id="toc-cocaine" class="nav-link" data-scroll-target="#cocaine">Cocaine</a></li>
  <li><a href="#heroin" id="toc-heroin" class="nav-link" data-scroll-target="#heroin">Heroin</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span style="font-size: 30px;">Demographic Characteristics</span><span style="font-size: 20px; color:gray;"> [Univariate Analysis] </span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><span style="background-color:#fdfd96;">How does each demographic characteristic affect the drug consumption patterns?</span></p>
<p><span style="font-size: 12pt; color: gray;">This univariate analysis page will feature an analysis of four key demographic factors: <strong><em>Age, Gender, Education Level, and Country</em></strong>. The aim is to elucidate their relationship with drug consumption patterns.<br><br> <strong>For reference:</strong> CL0 indicating â€˜never usedâ€™, CL1 representing â€˜used over a decade agoâ€™, CL2 indicating â€˜used in the last decadeâ€™, CL3 indicating â€˜used in the last yearâ€™, CL4 representing â€˜used in the last monthâ€™, CL5 indicating â€˜used in the last weekâ€™, and CL6 representing â€˜used in the last dayâ€™. <br><br> <strong>Note:</strong> This dataset contains 1766 participants, with 905 females and 861 males.</span></p>
<section id="legal-drugs" class="level2">
<h2 class="anchored" data-anchor-id="legal-drugs"><strong>Legal</strong> Drugs</h2>
<p>These three drugs (alcohol, cafeeine and nocotine) are legal in all 6 analyzed countries.</p>
<section id="alcohol" class="level3">
<h3 class="anchored" data-anchor-id="alcohol">Alcohol</h3>
<p>The majority of participants consume alcohol with some regularity, with monthly (CL4), weekly (CL5), or daily (CL6) consumption being the most reported.</p>
<p><strong>Younger people consume more:</strong> Younger individuals are more likely to have engaged in alcohol consumption more recently, while older age groups show a higher frequency of alcohol consumption in the more distant past, with a notable decline in recent consumption as age progresses.</p>
<p><strong>Minor difference caused by gender:</strong> While overall gender differences in alcohol consumption appear minimal, there are specific points of divergence. Despite these variations, both genders display a similar pattern of alcohol consumption, with the majority having consumed alcohol at some stage and only a small proportion never having consumed alcohol at all.</p>
<p><strong>Minor difference caused by educational background:</strong> The data suggests that alcohol consumption patterns, especially at higher consumption levels (such as CL4 and CL5), do not differ significantly across different educational levels.</p>
<p><strong>Minor difference caused by country:</strong> Alcohol consumption is a widespread phenomenon with similar levels of engagement across the countries surveyed, pointing to the absence of notable distinctions in alcohol consumption habits based on country.</p>
<section id="age" class="level4">
<h4 class="anchored" data-anchor-id="age">Age</h4>
<p>There is an observable overall decline in alcohol consumption as age increases. The proportion of individuals who have never consumed alcohol (CL0) diminishes with advancing age. The peak occurrence for those who last consumed alcohol over a decade ago (CL1) is found within the 45-54 age bracket. The age group most likely to have consumed alcohol in the last decade (CL2) is 35-44. For more recent consumption categoriesâ€”consumed in the last year (CL3), last month (CL4), last week (CL5), and last day (CL6)â€”the majority are in the youngest age group, 18-24.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="gender" class="level4">
<h4 class="anchored" data-anchor-id="gender">Gender</h4>
<p>A smaller portion of the surveyed population, 16.68% of females and 19.05% of males, includes individuals who have never consumed alcohol (CL0) or those who last consumed alcohol up to a year ago (CL3). The overall data suggests that the difference in alcohol consumption patterns between genders is negligible. The largest observed difference is in the weekly consumption category (CL5), where 42.98% of females and 37.51% of males reported consumption, yet this difference is not considered significant.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="education" class="level4">
<h4 class="anchored" data-anchor-id="education">Education</h4>
<p>The graph illustrates minimal variations in alcohol consumption across different educational levels. While there is a slight trend suggesting higher alcohol consumption among individuals with higher educational backgrounds, the differences are not significant.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="country" class="level4">
<h4 class="anchored" data-anchor-id="country">Country</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="caffeine" class="level3">
<h3 class="anchored" data-anchor-id="caffeine">Caffeine</h3>
<p><strong>Younger people consume more:</strong> Younger adults exhibiting more frequent usage. This trend suggests that caffeine consumption may decrease as individuals age, particularly after passing the 55-year mark.</p>
<p><strong>Minor gender difference:</strong> Both males and females exhibit similar patterns of caffeine consumption, with both genders showing a high level of caffeine intake. There is no significant gender difference influencing the frequency of caffeine consumption.</p>
<section id="age-1" class="level4">
<h4 class="anchored" data-anchor-id="age-1">Age</h4>
<p>The data suggests that weekly (CL5) and daily (CL6) caffeine consumption is predominantly observed in the younger age brackets, specifically those aged 18-24 and 25-34. There is a noticeable decline in caffeine consumption among individuals in the 55-64 age group. Furthermore, the peak of caffeine consumption â€˜over a decade agoâ€™ (CL1) is most evident in the 35-44 age category, which aligns with the finding that caffeine consumption is most prevalent among those currently in the 18-24 and 25-34 age groups.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="gender-1" class="level4">
<h4 class="anchored" data-anchor-id="gender-1">Gender</h4>
<p>The majority of surveyed individuals consume caffeine either on a daily basis (CL6), with 24.64% female and 29.15% male respondents, or on a weekly basis (CL5), with 42.98% females and 37.51% males. However, the gender difference in caffeine consumption frequency is not significantly pronounced.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="education-1" class="level4">
<h4 class="anchored" data-anchor-id="education-1">Education</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="country-1" class="level4">
<h4 class="anchored" data-anchor-id="country-1">Country</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="nicotine" class="level3">
<h3 class="anchored" data-anchor-id="nicotine">Nicotine</h3>
<section id="age-2" class="level4">
<h4 class="anchored" data-anchor-id="age-2">Age</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="gender-2" class="level4">
<h4 class="anchored" data-anchor-id="gender-2">Gender</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="education-2" class="level4">
<h4 class="anchored" data-anchor-id="education-2">Education</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="country-2" class="level4">
<h4 class="anchored" data-anchor-id="country-2">Country</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="controversial-drugs" class="level2">
<h2 class="anchored" data-anchor-id="controversial-drugs"><strong>Controversial</strong> Drugs</h2>
<p>This drug (cannabis) is legal in two analyzed countries (the United States and Canada) but illegal in four others.</p>
<section id="cannabis" class="level3">
<h3 class="anchored" data-anchor-id="cannabis">Cannabis</h3>
<section id="age-3" class="level4">
<h4 class="anchored" data-anchor-id="age-3">Age</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="gender-3" class="level4">
<h4 class="anchored" data-anchor-id="gender-3">Gender</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="education-3" class="level4">
<h4 class="anchored" data-anchor-id="education-3">Education</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="country-3" class="level4">
<h4 class="anchored" data-anchor-id="country-3">Country</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="illegal-drugs" class="level2">
<h2 class="anchored" data-anchor-id="illegal-drugs"><strong>Illegal</strong> Drugs</h2>
<p>These two drugs (Cocaine, Heroin) are illegal across all six analyzed countries.</p>
<section id="cocaine" class="level3">
<h3 class="anchored" data-anchor-id="cocaine">Cocaine</h3>
<section id="age-4" class="level4">
<h4 class="anchored" data-anchor-id="age-4">Age</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="gender-4" class="level4">
<h4 class="anchored" data-anchor-id="gender-4">Gender</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="education-4" class="level4">
<h4 class="anchored" data-anchor-id="education-4">Education</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="country-4" class="level4">
<h4 class="anchored" data-anchor-id="country-4">Country</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="heroin" class="level3">
<h3 class="anchored" data-anchor-id="heroin">Heroin</h3>
<section id="age-5" class="level4">
<h4 class="anchored" data-anchor-id="age-5">Age</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="gender-5" class="level4">
<h4 class="anchored" data-anchor-id="gender-5">Gender</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="education-5" class="level4">
<h4 class="anchored" data-anchor-id="education-5">Education</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="country-5" class="level4">
<h4 class="anchored" data-anchor-id="country-5">Country</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Univariate_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>